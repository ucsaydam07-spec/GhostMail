<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GhostMail | Temp Mail</title>
    <style>
        :root {
            --bg-color: #0d1117;
            --card-bg: #161b22;
            --accent: #58a6ff;
            --text: #c9d1d9;
            --border: #30363d;
            --otp-color: #2ea043;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
        }

        .container {
            width: 100%;
            max-width: 900px;
        }

        h1 {
            text-align: center;
            color: var(--accent);
            letter-spacing: 2px;
            margin-bottom: 30px;
        }

        /* Adres Kutusu */
        .address-box {
            background: var(--card-bg);
            border: 1px solid var(--border);
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            margin-bottom: 30px;
            position: relative;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .email-display {
            font-size: 1.8rem;
            font-weight: bold;
            color: #fff;
            margin-bottom: 15px;
            display: block;
            word-break: break-all;
        }

        button {
            background: var(--accent);
            border: none;
            padding: 10px 20px;
            color: #fff;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            margin: 5px;
            transition: 0.2s;
            font-weight: 600;
        }

        button:hover {
            opacity: 0.9;
            transform: translateY(-1px);
        }

        button.refresh-btn {
            background: #21262d;
            border: 1px solid var(--border);
            color: var(--text);
        }

        /* Liste */
        .mail-list {
            list-style: none;
            padding: 0;
        }

        .mail-item {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 6px;
            margin-bottom: 10px;
            padding: 15px;
            cursor: pointer;
            transition: 0.2s;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .mail-item:hover {
            border-color: var(--accent);
            transform: translateX(2px);
        }

        .mail-sender {
            font-weight: bold;
            color: #fff;
            min-width: 150px;
        }

        .mail-subject {
            flex-grow: 1;
            margin: 0 15px;
            color: #8b949e;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .mail-otp {
            background: rgba(46, 160, 67, 0.15);
            color: var(--otp-color);
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            font-size: 0.9em;
            border: 1px solid rgba(46, 160, 67, 0.3);
        }

        /* Modal / Detay */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: var(--card-bg);
            width: 80%;
            max-width: 700px;
            padding: 30px;
            border-radius: 12px;
            border: 1px solid var(--border);
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--border);
            padding-bottom: 10px;
        }

        .close-btn {
            background: transparent;
            color: #ff7b72;
            font-size: 1.5rem;
            padding: 0;
            line-height: 1;
        }

        .close-btn:hover {
            background: transparent;
            color: #ff5555;
            transform: none;
        }

        .otp-big {
            font-size: 2.5rem;
            text-align: center;
            color: var(--otp-color);
            margin: 25px 0;
            letter-spacing: 8px;
            border: 2px dashed var(--otp-color);
            padding: 15px;
            background: rgba(46, 160, 67, 0.05);
            border-radius: 8px;
        }

        pre {
            white-space: pre-wrap;
            word-wrap: break-word;
            background: #010409;
            padding: 15px;
            border-radius: 6px;
            border: 1px solid var(--border);
            color: #e6edf3;
        }

        /* API Guide Styles */
        .api-guide {
            margin-top: 60px;
            padding-top: 30px;
            border-top: 1px solid var(--border);
        }

        .api-endpoint {
            background: var(--card-bg);
            border: 1px solid var(--border);
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
        }

        .method {
            font-weight: bold;
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            margin-right: 12px;
            font-size: 0.85rem;
        }

        .get {
            background: #1f6feb;
            color: #fff;
        }

        .url {
            font-family: 'Consolas', monospace;
            color: #a5d6ff;
            font-size: 1.1rem;
        }

        .code-block {
            background: #0d1117;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Consolas', monospace;
            font-size: 0.9rem;
            color: #e6edf3;
            overflow-x: auto;
            border: 1px solid #30363d;
            line-height: 1.5;
        }

        /* Header & Toggle Button */
        .top-bar {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            margin-bottom: 10px;
            gap: 10px;
        }

        .lang-select {
            background: #0d1117;
            color: #8b949e;
            border: 1px solid #30363d;
            padding: 5px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85rem;
        }

        .dev-toggle-btn {
            background: transparent;
            border: 1px solid #30363d;
            color: #8b949e;
            padding: 5px 10px;
            font-size: 0.85rem;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: 0.2s;
        }

        .dev-toggle-btn:hover {
            border-color: #8b949e;
            color: #c9d1d9;
        }

        .api-guide {
            /* Varsayƒ±lan Gizli */
        }

        /* Layout & Ads */
        .app-wrapper {
            display: flex;
            gap: 20px;
            width: 100%;
            max-width: 1600px;
            justify-content: center;
            align-items: flex-start;
        }

        .ad-column {
            display: flex;
            flex-direction: column;
            gap: 20px;
            width: 300px;
            flex-shrink: 0;
            margin-top: 80px;
            /* Ana i√ßerikle hizalamak i√ßin biraz a≈üaƒüƒ± */
        }

        .ad-box {
            width: 100%;
            height: 250px;
            background: #161b22;
            border: 1px dashed #30363d;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #8b949e;
            font-size: 0.9rem;
            position: relative;
        }

        .ad-box::after {
            content: "Reklam Alanƒ±";
            opacity: 0.5;
        }

        /* Mobilde reklamlarƒ± gizle */
        @media (max-width: 1200px) {
            .ad-column {
                display: none;
            }
        }
    </style>
    <!-- GOOGLE ADSENSE ANA SCRIPT (Bunu bir kere eklemek yeterli) -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7899165985058890"
        crossorigin="anonymous"></script>
</head>

<body>

    <div class="app-wrapper">
        <!-- SOL REKLAM ALANI -->
        <div class="ad-column">
            <!-- REKLAM 1 -->
            <div class="ad-box" style="border:none; background: transparent;">
                <img src="https://placehold.co/300x250/161b22/8b949e?text=Reklam+Opsiyonu+1\n(Google+Ads+Ready)"
                    alt="Reklam" style="border-radius:8px; opacity:0.7;">
            </div>

            <!-- REKLAM 2 -->
            <div class="ad-box" style="border:none; background: transparent;">
                <img src="https://placehold.co/300x250/161b22/8b949e?text=Reklam+Opsiyonu+2\n(Waiting+Approval)"
                    alt="Reklam" style="border-radius:8px; opacity:0.7;">
            </div>
        </div>

        <!-- ANA ƒ∞√áERƒ∞K -->
        <div class="container">
            <div class="top-bar">
                <select id="langSelect" class="lang-select" onchange="changeLanguage(this.value)">
                    <option value="tr">üáπüá∑ T√ºrk√ße</option>
                    <option value="en">üá¨üáß English</option>
                    <option value="de">üá©üá™ Deutsch</option>
                    <option value="fr">üá´üá∑ Fran√ßais</option>
                    <option value="es">üá™üá∏ Espa√±ol</option>
                    <option value="ru">üá∑üá∫ –†—É—Å—Å–∫–∏–π</option>
                    <option value="zh">üá®üá≥ ‰∏≠Êñá</option>
                </select>
                <button class="dev-toggle-btn" onclick="toggleApiGuide()">
                    <span>&lt;/&gt;</span> <span data-i18n="devMode">Geli≈ütirici Modu</span>
                </button>
            </div>

            <h1>üëª GhostMail</h1>

            <div class="address-box">
                <span id="currentEmail" class="email-display">Mail adresi olu≈üturuluyor...</span>
                <div>
                    <div>
                        <button onclick="copyEmail()" data-i18n="copy">Kopyala</button>
                        <button class="refresh-btn" onclick="fetchEmails()"><span data-i18n="refresh">Yenile</span>
                            ‚ü≥</button>
                        <button class="refresh-btn" onclick="generateNewEmail()" data-i18n="newAddress">Yeni
                            Adres</button>
                        <button class="refresh-btn" onclick="recoverEmail()"
                            style="color: #e3b341; border-color: #a08430;" data-i18n="recoverEmail">Eski Maili
                            A√ß</button>
                    </div>
                </div>

                <h3 style="margin-left: 5px; color: var(--text);"><span data-i18n="inbox">Gelen Kutusu</span> <span
                        style="font-weight: normal; font-size: 0.8em; color: gray;" data-i18n="autoRefresh">(Otomatik
                        yenilenir)</span></h3>
                <ul id="mailList" class="mail-list">
                    <!-- Mailler buraya gelecek -->
                </ul>

                <!-- API GUIDE SECTION (ID eklendi) -->
                <div id="apiGuideDisplay" class="api-guide">
                    <h2 style="color: var(--text);">üë®‚Äçüíª <span data-i18n="apiGuideTitle">Geli≈ütirici API Rehberi</span>
                    </h2>
                    <p style="color: #8b949e; margin-bottom: 25px; line-height: 1.6;" data-i18n="apiGuideDesc">GhostMail
                        sistemini kendi yazƒ±lƒ±mlarƒ±nƒ±za
                        entegre etmek i√ßin a≈üaƒüƒ±daki endpointleri kullanabilirsiniz. Sistem tamamen RESTful mantƒ±ƒüƒ±yla
                        √ßalƒ±≈üƒ±r.
                    </p>

                    <!-- Endpoints -->
                    <div class="api-endpoint">
                        <div style="display:flex; justify-content: space-between; align-items: center;">
                            <div><span class="method get">GET</span> <span class="url">/api/generate</span></div>
                            <span style="font-size: 0.9rem; color: #8b949e; font-weight: 600;">Mail Olu≈ütur</span>
                        </div>
                        <p style="margin-top: 15px; margin-bottom: 5px; color: #c9d1d9;">Yeni ve rastgele bir e-posta
                            adresi
                            √ºretir.</p>
                        <div class="code-block">
                            <span style="color: #8b949e;">// Response</span>
                            {
                            <span style="color: #7ee787;">"email"</span>: <span
                                style="color: #a5d6ff;">"x9a2k@ghostmail.com"</span>
                            }
                        </div>
                    </div>

                    <div class="api-endpoint">
                        <div style="display:flex; justify-content: space-between; align-items: center;">
                            <div><span class="method get">GET</span> <span class="url">/api/inbox/:email</span></div>
                            <span style="font-size: 0.9rem; color: #8b949e; font-weight: 600;">Gelen Kutusu</span>
                        </div>
                        <p style="margin-top: 15px; margin-bottom: 5px; color: #c9d1d9;">Belirtilen e-posta adresine
                            gelen
                            son
                            mailleri getirir. Alias adresleri de destekler.</p>
                        <div class="code-block">
                            <span style="color: #8b949e;">// Example: /api/inbox/x9a2k@ghostmail.com</span>

                            <span style="color: #8b949e;">// Response</span>
                            [
                            {
                            <span style="color: #7ee787;">"id"</span>: <span style="color: #79c0ff;">1</span>,
                            <span style="color: #7ee787;">"from_address"</span>: <span
                                style="color: #a5d6ff;">"instagram@mail.com"</span>,
                            <span style="color: #7ee787;">"subject"</span>: <span style="color: #a5d6ff;">"Verify
                                Code"</span>,
                            <span style="color: #7ee787;">"otp_codes"</span>: <span
                                style="color: #a5d6ff;">"123456"</span>
                            }
                            ]
                        </div>
                    </div>

                    <div class="api-endpoint">
                        <div style="display:flex; justify-content: space-between; align-items: center;">
                            <div><span class="method get">GET</span> <span class="url">/api/email/:id</span></div>
                            <span style="font-size: 0.9rem; color: #8b949e; font-weight: 600;">Mail Detayƒ±</span>
                        </div>
                        <p style="margin-top: 15px; margin-bottom: 5px; color: #c9d1d9;">Bir mailin t√ºm i√ßeriƒüini (HTML,
                            Text ve
                            ayƒ±klanmƒ±≈ü Linkler) getirir.</p>
                        <div class="code-block">
                            <span style="color: #8b949e;">// Example: /api/email/5</span>

                            <span style="color: #8b949e;">// Response</span>
                            {
                            <span style="color: #7ee787;">"id"</span>: <span style="color: #79c0ff;">5</span>,
                            <span style="color: #7ee787;">"html_content"</span>: <span
                                style="color: #a5d6ff;">"&lt;div&gt;...&lt;/div&gt;"</span>,
                            <span style="color: #7ee787;">"links"</span>: [<span
                                style="color: #a5d6ff;">"http://example.com"</span>]
                            }
                        </div>
                    </div>

                    <!-- Code Examples -->
                    <h3
                        style="margin-top: 50px; border-bottom: 1px solid var(--border); padding-bottom: 15px; color: var(--text);">
                        ‚ö° Hazƒ±r Entegrasyon Kodlarƒ±</h3>
                    <p style="color: #8b949e; margin-bottom: 25px;">A≈üaƒüƒ±daki kodlarƒ± kopyalayƒ±p projenize yapƒ±≈ütƒ±rƒ±n.
                        Kimlik
                        doƒürulama gerekmez.</p>

                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 20px;">

                        <!-- Python Card -->
                        <div class="api-endpoint" style="margin: 0; display: flex; flex-direction: column;">
                            <h4
                                style="margin-top: 0; color: #79c0ff; display: flex; align-items: center; font-size: 1.1rem;">
                                <span style="font-size: 1.5rem; margin-right: 10px;">üêç</span> Python
                            </h4>
                            <div class="code-block"
                                style="color: #c9d1d9; font-size: 0.85rem; line-height: 1.5; flex-grow: 1;">
                                <span style="color: #ff7b72;">import</span> requests
                                <span style="color: #ff7b72;">import</span> time

                                <span style="color: #8b949e;"># 1. Yeni Mail Al</span>
                                res = requests.get(<span
                                    style="color: #a5d6ff;">'http://localhost:3000/api/generate'</span>)
                                email = res.json()[<span style="color: #a5d6ff;">'email'</span>]
                                <span style="color: #d2a8ff;">print</span>(f<span style="color: #a5d6ff;">"Mail Hesabƒ±n:
                                    {email}"</span>)

                                <span style="color: #8b949e;"># 2. Maili Bekle</span>
                                <span style="color: #d2a8ff;">print</span>(<span style="color: #a5d6ff;">"Mail
                                    bekleniyor..."</span>)
                                <span style="color: #ff7b72;">while</span> <span style="color: #79c0ff;">True</span>:
                                inbox = requests.get(f<span
                                    style="color: #a5d6ff;">'http://localhost:3000/api/inbox/{email}'</span>).json()
                                <span style="color: #ff7b72;">if</span> inbox:
                                code = inbox[<span style="color: #79c0ff;">0</span>][<span
                                    style="color: #a5d6ff;">'otp_codes'</span>]
                                <span style="color: #d2a8ff;">print</span>(f<span style="color: #a5d6ff;">"üöÄ ONAY KODU
                                    GELDƒ∞:
                                    {code}"</span>)
                                <span style="color: #ff7b72;">break</span>
                                time.sleep(<span style="color: #79c0ff;">2</span>)
                            </div>
                        </div>

                        <!-- Node.js Card -->
                        <div class="api-endpoint" style="margin: 0; display: flex; flex-direction: column;">
                            <h4
                                style="margin-top: 0; color: #f1e05a; display: flex; align-items: center; font-size: 1.1rem;">
                                <span style="font-size: 1.5rem; margin-right: 10px;">üì¶</span> Node.js
                            </h4>
                            <div class="code-block"
                                style="color: #c9d1d9; font-size: 0.85rem; line-height: 1.5; flex-grow: 1;">
                                <span style="color: #ff7b72;">const</span> axios = require(<span
                                    style="color: #a5d6ff;">'axios'</span>);

                                <span style="color: #ff7b72;">async function</span> <span
                                    style="color: #d2a8ff;">main</span>()
                                {
                                <span style="color: #8b949e;">// 1. Yeni Mail Al</span>
                                <span style="color: #ff7b72;">const</span> { data } = <span
                                    style="color: #ff7b72;">await</span>
                                axios.get(<span style="color: #a5d6ff;">'http://localhost:3000/api/generate'</span>);
                                console.log(<span style="color: #a5d6ff;">`Mail Hesabƒ±n: ${data.email}`</span>);

                                <span style="color: #8b949e;">// 2. Maili Bekle</span>
                                console.log(<span style="color: #a5d6ff;">"Mail bekleniyor..."</span>);
                                setInterval(<span style="color: #ff7b72;">async</span> () => {
                                <span style="color: #ff7b72;">const</span> inbox = <span
                                    style="color: #ff7b72;">await</span>
                                axios.get(<span
                                    style="color: #a5d6ff;">`http://localhost:3000/api/inbox/${data.email}`</span>);
                                <span style="color: #ff7b72;">if</span>(inbox.data.length > <span
                                    style="color: #79c0ff;">0</span>) {
                                <span style="color: #ff7b72;">const</span> code = inbox.data[<span
                                    style="color: #79c0ff;">0</span>].otp_codes;
                                console.log(<span style="color: #a5d6ff;">`üöÄ ONAY KODU GELDƒ∞: ${code}`</span>);
                                process.exit();
                                }
                                }, <span style="color: #79c0ff;">2000</span>);
                                }
                                main();
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- DETAY MODALI -->
            <div id="detailModal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2 id="modalSubject">Konu</h2>
                        <button class="close-btn" onclick="closeModal()">‚úï</button>
                    </div>
                    <div id="modalOTP" style="display:none;" class="otp-big"></div>
                    <div id="modalBody"></div>
                    <h4 style="margin-top: 20px; color: var(--accent);">Bulunan Linkler:</h4>
                    <ul id="modalLinks"></ul>
                </div>
            </div>

            <script>
                // Dil Tanƒ±mlarƒ±
                const translations = {
                    tr: {
                        devMode: "Geli≈ütirici Modu",
                        creating: "Mail adresi olu≈üturuluyor...",
                        copy: "Kopyala",
                        refresh: "Yenile",
                        newAddress: "Yeni Adres",
                        recoverEmail: "Eski Maili A√ß",
                        inbox: "Gelen Kutusu",
                        autoRefresh: "(Otomatik yenilenir)",
                        apiGuideTitle: "Geli≈ütirici API Rehberi",
                        apiGuideDesc: "GhostMail sistemini kendi yazƒ±lƒ±mlarƒ±nƒ±za entegre etmek i√ßin a≈üaƒüƒ±daki endpointleri kullanabilirsiniz. Sistem tamamen RESTful mantƒ±ƒüƒ±yla √ßalƒ±≈üƒ±r.",
                        linksFound: "Bulunan Linkler:",
                        emptyInbox: "Hen√ºz mail yok...",
                        promptRecover: "A√ßmak istediƒüiniz mail adresini (veya sadece adƒ±nƒ±) girin:",
                        alertCopied: "Kopyalandƒ±: "
                    },
                    en: {
                        devMode: "Developer Mode",
                        creating: "Creating email address...",
                        copy: "Copy",
                        refresh: "Refresh",
                        newAddress: "New Address",
                        recoverEmail: "Recover Email",
                        inbox: "Inbox",
                        autoRefresh: "(Auto refreshing)",
                        apiGuideTitle: "Developer API Guide",
                        apiGuideDesc: "You can use the following endpoints to integrate GhostMail into your software. The system works entirely on RESTful logic.",
                        linksFound: "Found Links:",
                        emptyInbox: "No mails yet...",
                        promptRecover: "Enter the email address (or just the name) you want to open:",
                        alertCopied: "Copied: "
                    },
                    de: {
                        devMode: "Entwicklermodus",
                        creating: "E-Mail-Adresse wird erstellt...",
                        copy: "Kopieren",
                        refresh: "Aktualisieren",
                        newAddress: "Neue Adresse",
                        recoverEmail: "E-Mail wiederherstellen",
                        inbox: "Posteingang",
                        autoRefresh: "(Auto-Aktualisierung)",
                        apiGuideTitle: "Entwickler-API-Handbuch",
                        apiGuideDesc: "Sie k√∂nnen die folgenden Endpunkte verwenden, um GhostMail in Ihre Software zu integrieren. RESTful-Logik.",
                        linksFound: "Gefundene Links:",
                        emptyInbox: "Noch keine E-Mails...",
                        promptRecover: "Geben Sie die E-Mail-Adresse (oder nur den Namen) ein:",
                        alertCopied: "Kopiert: "
                    },
                    fr: {
                        devMode: "Mode D√©veloppeur",
                        creating: "Cr√©ation de l'adresse email...",
                        copy: "Copier",
                        refresh: "Actualiser",
                        newAddress: "Nouvelle Adresse",
                        recoverEmail: "R√©cup√©rer Email",
                        inbox: "Bo√Æte de r√©ception",
                        autoRefresh: "(Actualisation auto)",
                        apiGuideTitle: "Guide API D√©veloppeur",
                        apiGuideDesc: "Vous pouvez utiliser les endpoints suivants pour int√©grer GhostMail. Logique RESTful.",
                        linksFound: "Liens trouv√©s :",
                        emptyInbox: "Pas encore de mails...",
                        promptRecover: "Entrez l'adresse email (ou juste le nom) √† ouvrir :",
                        alertCopied: "Copi√© : "
                    },
                    es: {
                        devMode: "Modo Desarrollador",
                        creating: "Creando direcci√≥n de correo...",
                        copy: "Copiar",
                        refresh: "Actualizar",
                        newAddress: "Nueva Direcci√≥n",
                        recoverEmail: "Recuperar Correo",
                        inbox: "Bandeja de Entrada",
                        autoRefresh: "(Auto actualizaci√≥n)",
                        apiGuideTitle: "Gu√≠a API Desarrollador",
                        apiGuideDesc: "Puede utilizar los siguientes endpoints para integrar GhostMail. L√≥gica RESTful.",
                        linksFound: "Enlaces encontrados:",
                        emptyInbox: "A√∫n no hay correos...",
                        promptRecover: "Ingrese la direcci√≥n de correo (o solo el nombre):",
                        alertCopied: "Copiado: "
                    },
                    ru: {
                        devMode: "–†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞",
                        creating: "–°–æ–∑–¥–∞–Ω–∏–µ –∞–¥—Ä–µ—Å–∞ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã...",
                        copy: "–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å",
                        refresh: "–û–±–Ω–æ–≤–∏—Ç—å",
                        newAddress: "–ù–æ–≤—ã–π –∞–¥—Ä–µ—Å",
                        recoverEmail: "–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å",
                        inbox: "–í—Ö–æ–¥—è—â–∏–µ",
                        autoRefresh: "(–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)",
                        apiGuideTitle: "–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ API",
                        apiGuideDesc: "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ GhostMail. RESTful API.",
                        linksFound: "–ù–∞–π–¥–µ–Ω–Ω—ã–µ —Å—Å—ã–ª–∫–∏:",
                        emptyInbox: "–ü–∏—Å–µ–º –ø–æ–∫–∞ –Ω–µ—Ç...",
                        promptRecover: "–í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã (–∏–ª–∏ –∏–º—è):",
                        alertCopied: "–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ: "
                    },
                    zh: {
                        devMode: "ÂºÄÂèëËÄÖÊ®°Âºè",
                        creating: "Ê≠£Âú®ÂàõÂª∫ÁîµÂ≠êÈÇÆ‰ª∂Âú∞ÂùÄ...",
                        copy: "Â§çÂà∂",
                        refresh: "Âà∑Êñ∞",
                        newAddress: "Êñ∞Âú∞ÂùÄ",
                        recoverEmail: "ÊÅ¢Â§çÈÇÆ‰ª∂",
                        inbox: "Êî∂‰ª∂ÁÆ±",
                        autoRefresh: "(Ëá™Âä®Âà∑Êñ∞)",
                        apiGuideTitle: "ÂºÄÂèëËÄÖ API ÊåáÂçó",
                        apiGuideDesc: "ÊÇ®ÂèØ‰ª•‰ΩøÁî®‰ª•‰∏ãÁ´ØÁÇπÂ∞Ü GhostMail ÈõÜÊàêÂà∞ÊÇ®ÁöÑËΩØ‰ª∂‰∏≠„ÄÇÂÆåÂÖ®Âü∫‰∫é RESTful ÈÄªËæë„ÄÇ",
                        linksFound: "ÊâæÂà∞ÁöÑÈìæÊé•Ôºö",
                        emptyInbox: "ÊöÇÊó†ÈÇÆ‰ª∂...",
                        promptRecover: "ËæìÂÖ•ÊÇ®Ë¶ÅÊâìÂºÄÁöÑÁîµÂ≠êÈÇÆ‰ª∂Âú∞ÂùÄÔºàÊàñ‰ªÖËæìÂÖ•ÂêçÁß∞ÔºâÔºö",
                        alertCopied: "Â∑≤Â§çÂà∂Ôºö"
                    }
                };

                let currentLang = localStorage.getItem('ghostLang') || 'tr';

                // Dil Deƒüi≈ütirme Fonksiyonu
                function changeLanguage(lang) {
                    currentLang = lang;
                    localStorage.setItem('ghostLang', lang);
                    document.getElementById('langSelect').value = lang;

                    const texts = translations[lang];

                    document.querySelectorAll('[data-i18n]').forEach(el => {
                        const key = el.getAttribute('data-i18n');
                        if (texts[key]) el.innerText = texts[key];
                    });

                    // √ñzel durumlar (JS i√ßindeki metinler i√ßin UI g√ºncellemesi)
                    const listEl = document.getElementById('mailList');
                    if (listEl.innerHTML.includes('Hen√ºz mail yok...') || listEl.innerHTML.includes('No mails yet...')) {
                        listEl.innerHTML = `<div style="text-align:center; padding:20px; color:#555;">${texts.emptyInbox}</div>`;
                    }
                    document.querySelector('#detailModal h4').innerText = texts.linksFound;
                }

                let myEmail = localStorage.getItem('ghostEmail');

                // Ba≈ülangƒ±√ß: Mail yoksa olu≈ütur
                if (!myEmail) {
                    generateNewEmail();
                } else {
                    document.getElementById('currentEmail').innerText = myEmail;
                    fetchEmails();
                    startAutoRefresh();
                }

                // Sayfa y√ºklendiƒüinde dili ayarla
                changeLanguage(currentLang);

                async function generateNewEmail() {
                    const res = await fetch('/api/generate');
                    const data = await res.json();
                    myEmail = data.email;
                    saveAndRender(myEmail);
                }

                function recoverEmail() {
                    const input = prompt(translations[currentLang].promptRecover, "");
                    if (!input) return;

                    let newMail = input.trim();
                    // Eƒüer @ i≈üareti yoksa domaini biz ekleyelim
                    if (!newMail.includes('@')) {
                        newMail += '@ghostmail.com';
                    }

                    saveAndRender(newMail);
                }

                function saveAndRender(email) {
                    myEmail = email;
                    localStorage.setItem('ghostEmail', myEmail);
                    document.getElementById('currentEmail').innerText = myEmail;
                    document.getElementById('mailList').innerHTML = ''; // Listeyi temizle
                    fetchEmails();
                }

                function copyEmail() {
                    navigator.clipboard.writeText(myEmail);
                    alert(translations[currentLang].alertCopied + myEmail);
                }

                async function fetchEmails() {
                    if (!myEmail) return;
                    try {
                        const res = await fetch(`/api/inbox/${myEmail}`);
                        const emails = await res.json();
                        renderList(emails);
                    } catch (e) { console.error(e); }
                }

                function renderList(emails) {
                    const listEl = document.getElementById('mailList');
                    // Sadece yeni mail varsa g√ºncelleme yapƒ±labilir ama ≈üimdilik d√ºz basƒ±yoruz
                    listEl.innerHTML = emails.map(mail => `
            <li class="mail-item" onclick="openMail(${mail.id})">
                <span class="mail-sender">${mail.from_address}</span>
                <span class="mail-subject">${mail.subject}</span>
                ${mail.otp_codes ? `<span class="mail-otp">${mail.otp_codes}</span>` : ''}
            </li>
        `).join('') || `<div style="text-align:center; padding:20px; color:#555;">${translations[currentLang].emptyInbox}</div>`;
                }

                async function openMail(id) {
                    const res = await fetch(`/api/email/${id}`);
                    const mail = await res.json();

                    document.getElementById('modalSubject').innerText = mail.subject;
                    document.getElementById('modalBody').innerHTML = mail.html_content || `<pre>${mail.text_content}</pre>`;

                    // OTP G√∂ster
                    const otpEl = document.getElementById('modalOTP');
                    if (mail.otp_codes) {
                        otpEl.innerText = mail.otp_codes;
                        otpEl.style.display = 'block';
                    } else {
                        otpEl.style.display = 'none';
                    }

                    // Linkleri Listele
                    const linksEl = document.getElementById('modalLinks');
                    const links = JSON.parse(mail.links || '[]');
                    if (links.length > 0) {
                        linksEl.innerHTML = links.map(l => `<li><a href="${l}" target="_blank" style="color:var(--accent); text-decoration: none;">${l}</a></li>`).join('');
                    } else {
                        linksEl.innerHTML = '<li style="color: gray;">Link bulunamadƒ±.</li>';
                    }

                    document.getElementById('detailModal').style.display = 'flex';
                }

                function closeModal() {
                    document.getElementById('detailModal').style.display = 'none';
                }

                function toggleApiGuide() {
                    // ≈ûimdilik devre dƒ±≈üƒ± (Sunum/ƒ∞lk a≈üama i√ßin)
                    return;

                    /* Aktif etmek istersen burayƒ± a√ß:
                    const guide = document.getElementById('apiGuideDisplay');
                    if (guide.style.display === 'block') {
                        guide.style.display = 'none';
                    } else {
                        guide.style.display = 'block';
                        guide.scrollIntoView({ behavior: 'smooth' });
                    }
                    */
                }

                // Her 3 saniyede bir kontrol
                function startAutoRefresh() {
                    setInterval(fetchEmails, 3000);
                }

                // Auto start
                startAutoRefresh();

            </script>

            <!-- SAƒû REKLAM ALANI -->
        </div> <!-- Container Biti≈ü -->

        <div class="ad-column">
            <!-- REKLAM 3 -->
            <div class="ad-box" style="border:none; background: transparent;">
                <img src="https://placehold.co/300x250/161b22/8b949e?text=Reklam+Opsiyonu+3\n(Google+Ads+Ready)"
                    alt="Reklam" style="border-radius:8px; opacity:0.7;">
            </div>

            <!-- REKLAM 4 -->
            <div class="ad-box" style="border:none; background: transparent;">
                <img src="https://placehold.co/300x250/161b22/8b949e?text=Reklam+Opsiyonu+4\n(Waiting+Approval)"
                    alt="Reklam" style="border-radius:8px; opacity:0.7;">
            </div>
        </div>
    </div> <!-- App Wrapper Biti≈ü -->

</body>

</html>